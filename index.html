<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Element Walker</title>
    <script>
        function Select($el) {
            console.log('select initialized: ', $el)
        }
        function Button($el) {
            console.log('Button initialized: ', $el)
        }
        function initialize(el) {
            const allElements = el.querySelectorAll('*');

            allElements.forEach(element => {
                console.log(element.childNodes)
                element.childNodes.forEach(child => {
                    if (child.nodeType === Node.COMMENT_NODE) {
                        const value = child.nodeValue.trim()
                        if(value.startsWith('include:')) {
                            const name = value.split(':')[1]
                            window[name](child.nextElementSibling)
                        }
                    }
                })
                if (element.nodeType === Node.ELEMENT_NODE) {
                    initialize(element)
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            initialize(document.body);
        })
    </script>
</head>

<body>
    <!-- include:Button -->
    <div>This is a div
        <!-- include:Select -->
        <div>This is a div</div>
        <!-- include:Button -->
        <span>This is a span <!-- This is a sample HTML comment -->
            <div>This is a div</div>
            <!-- Another comment -->
            <span>This is a span</span>
            <!-- Your HTML content goes here -->
        </span>
        <!-- Your HTML content goes here -->
    </div>
    <!-- Another comment -->
    <span>This is a span <!-- This is a sample HTML comment -->
        <div>This is a div</div>
        <!-- Another comment -->
        <span>This is a span</span>
        <!-- Your HTML content goes here -->
    </span>
    <!-- Your HTML content goes here -->
</body>

</html>